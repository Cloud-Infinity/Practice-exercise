<template>
    <div class="outerCard">
    <lightning-card title="Select Child Relationship" >
    <div class="slds-grid slds-wrap">
        <div class="slds-col slds-size_3-of-12 slds-p-right_xx-large">
            <lightning-combobox
            label="Child Object Name"
            value={selectedChildObjectValue}
            options={relatedObjects}
            onchange={handleChildObjChange}>
        </lightning-combobox>
        </div>
        <div class="slds-col slds-size_3-of-12 slds-p-right_xx-large">
            <lightning-combobox
            label="Child Relationship Name"
            value={selectedRelationFieldValue}
            placeholder="Select Relationship field"
            options={relationFields}
            onchange={handleRelationFieldChange}
            disabled={fieldsdisable} ></lightning-combobox>
        </div>
        <div class="slds-col slds-size_3-of-12 slds-p-right_xx-large">
            <lightning-combobox
            label="Fields set Name"
            value={selectedFieldSetValue}
            placeholder="Select fieldset"
            options={FieldsetNamesFromApex}
            onchange={handleFieldSetChange}
            disabled={fieldsdisable} ></lightning-combobox>
        </div>
        <div class="slds-col slds-size_3-of-12 slds-p-right_xx-large">
            <div class="slds-align_absolute-center" style="padding: 20px;">
            <lightning-button variant="brand" label="Show Results" title="Primary action" onclick={handleClick}  ></lightning-button>
        </div>
        </div>
    </div>

    <!-- <template lwc:if={loadomplete}> -->

    <lightning-card title="Results are shown below" class="--slds-c-card-shadow">
        <template lwc:if={childObjIds.length}>
            
            <template for:each={childObjIds} for:item="currentItem" for:index="index">
                <lightning-card key={currentItem}>
                    <div class="outerCard">
                        <lightning-record-view-form object-api-name={selectedChildObjectValue} record-id={currentItem}>
                    
                            <!-- <lightning-layout> -->
                                <div class="slds-grid slds-wrap">
                                    <template for:each={fieldAPINames} for:item="apiName" for:index="index">
                                        <!-- <lightning-layout-item padding="around-small" key={apiName}> -->
                    
                                            <div class="slds-col slds-size_3-of-12 slds-p-right_xx-large" key={apiName}>
                                                
                                                <lightning-output-field field-name={apiName}></lightning-output-field>
                                            </div>
                                        <!-- </lightning-layout-item> -->
                                    </template>
                                </div>
                            <!-- </lightning-layout> -->
                    
                        </lightning-record-view-form>
                    </div>
                </lightning-card>
            </template>
        
          </template>
          <template lwc:else>
            <div class="slds-m-vertical_medium">{noDataText}</div>
          </template>
        
        

    </lightning-card>
<!-- </template> -->
        

        
    </lightning-card>
</div>
</template>